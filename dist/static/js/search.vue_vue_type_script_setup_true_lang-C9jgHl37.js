var q=Object.defineProperty,A=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var D=(t,s,a)=>s in t?q(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,V=(t,s)=>{for(var a in s||(s={}))H.call(s,a)&&D(t,a,s[a]);if(R)for(var a of R(s))K.call(s,a)&&D(t,a,s[a]);return t},L=(t,s)=>A(t,G(s));var T=(t,s,a)=>new Promise((p,d)=>{var h=r=>{try{n(a.next(r))}catch(m){d(m)}},o=r=>{try{n(a.throw(r))}catch(m){d(m)}},n=r=>r.done?p(r.value):Promise.resolve(r.value).then(h,o);n((a=a.apply(t,s)).next())});import{f as k,g as M,b as Q,c as W,_ as Y}from"./_plugin-vue_export-helper-D5XCxx20.js";import{u as Z,P as ee}from"./plus-form-BSABUXIv.js";import{d as j,a as z,r as ae,d0 as le,p as E,u as l,n as oe,b3 as se,f as c,b as f,aI as te,l as C,w as u,X as v,aJ as U,b6 as N,bO as re,bg as B,fh as ne,h as F,t as $,j as I,i as x,fi as ue,bP as pe,fj as de,fk as ie,a8 as ce}from"./index-BxkcXAmK.js";var fe=j({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset","collapse"],setup(t,{expose:s,emit:a}){const p=t,{t:d}=Z(),h=z(),o=ae({values:{},subColumns:[],originData:[],isShowUnfold:!1}),n=le(),r=k(n,M()),m=k(n,Q()),J=k(n,W());o.originData=E(()=>p.columns.filter(e=>l(e.hideInSearch)!==!0).map(e=>L(V({},e),{hideInForm:!1}))),o.subColumns=E(()=>{const e=o.originData;return p.hasUnfold&&!o.isShowUnfold?e.slice(0,p.showNumber):e}),oe(()=>p.modelValue,e=>{o.values=e},{immediate:!0});const O=(e,g)=>T(this,null,function*(){a("change",e,g),a("update:modelValue",e)}),S=()=>T(this,null,function*(){a("search",o.values)}),w=()=>{o.values=V({},p.defaultValues),a("reset",o.values),a("update:modelValue",o.values)},_=()=>{o.isShowUnfold=!o.isShowUnfold,a("collapse",o.isShowUnfold)};s({plusFormInstance:h,handleReset:w,handleSearch:S,handleUnfold:_});const{isShowUnfold:P,subColumns:X}=se(o);return(e,g)=>(c(),f(l(ee),ce({ref_key:"plusFormInstance",ref:h},e.$attrs,{modelValue:o.values,"onUpdate:modelValue":g[0]||(g[0]=y=>o.values=y),inline:e.inline,"row-props":e.rowProps,"col-props":e.colProps,columns:l(X),class:"plus-search","has-footer":!1,onChange:O}),te({"search-footer":u(()=>[e.hasFooter?(c(),f(l(re),{key:0,class:"plus-search__button__wrapper"},{default:u(()=>[v(e.$slots,"footer",{isShowUnfold:l(P),handleReset:w,handleSearch:S,handleUnfold:_},()=>[e.hasReset?(c(),f(l(B),{key:0,icon:l(ne),onClick:w},{default:u(()=>[F($(e.resetText||l(d)("plus.search.resetText")),1)]),_:1},8,["icon"])):I("v-if",!0),x(l(B),{type:"primary",loading:e.searchLoading,icon:l(ue),onClick:S},{default:u(()=>[F($(e.searchText||l(d)("plus.search.searchText")),1)]),_:1},8,["loading","icon"]),e.hasUnfold&&o.originData.length>e.showNumber?(c(),f(l(B),{key:1,type:"primary",link:"",onClick:_},{default:u(()=>[F($(l(P)?l(d)("plus.search.retract"):l(d)("plus.search.expand"))+" ",1),x(l(pe),null,{default:u(()=>[l(P)?(c(),f(l(de),{key:0})):(c(),f(l(ie),{key:1}))]),_:1})]),_:1})):I("v-if",!0)])]),_:3})):I("v-if",!0)]),_:2},[C(l(r),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),C(l(m),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),C(l(J),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:u(()=>[v(e.$slots,"tooltip-icon")]),key:"0"}:void 0]),1040,["modelValue","inline","row-props","col-props","columns"]))}}),he=Y(fe,[["__file","index.vue"]]);const me=he,Se=j({__name:"search",setup(t){const s=z({status:"0",time:new Date().toString()}),a=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],p=o=>{},d=o=>{},h=()=>{};return(o,n)=>(c(),f(l(me),{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=r=>s.value=r),columns:a,"show-number":2,"label-width":"80","label-position":"right",onChange:p,onSearch:d,onReset:h},null,8,["modelValue"]))}});export{Se as _};
