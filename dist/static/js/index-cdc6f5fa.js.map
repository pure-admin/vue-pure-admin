{"version":3,"file":"index-cdc6f5fa.js","sources":["../../../src/components/ReSegmented/src/index.tsx","../../../src/components/ReSegmented/index.ts","../../../src/views/components/segmented/index.vue"],"sourcesContent":["import \"./index.css\";\nimport {\n  h,\n  ref,\n  watch,\n  nextTick,\n  defineComponent,\n  getCurrentInstance\n} from \"vue\";\nimport type { OptionsType } from \"./type\";\nimport { isFunction, useDark } from \"@pureadmin/utils\";\nimport { useRenderIcon } from \"@/components/ReIcon/src/hooks\";\n\nconst props = {\n  options: {\n    type: Array<OptionsType>,\n    default: () => []\n  },\n  /** 默认选中，按照第一个索引为 `0` 的模式 */\n  defaultValue: {\n    type: Number,\n    default: 0\n  }\n};\n\nexport default defineComponent({\n  name: \"ReSegmented\",\n  props,\n  emits: [\"change\"],\n  setup(props, { emit }) {\n    const width = ref(0);\n    const translateX = ref(0);\n    const { isDark } = useDark();\n    const initStatus = ref(false);\n    const curMouseActive = ref(-1);\n    const segmentedItembg = ref(\"\");\n    const instance = getCurrentInstance()!;\n    const curIndex = ref(props.defaultValue);\n\n    function handleChange({ option, index }, event: Event) {\n      if (option.disabled) return;\n      event.preventDefault();\n      curIndex.value = index;\n      segmentedItembg.value = \"\";\n      emit(\"change\", { index, option });\n    }\n\n    function handleMouseenter({ option, index }, event: Event) {\n      event.preventDefault();\n      curMouseActive.value = index;\n      if (option.disabled || curIndex.value === index) {\n        segmentedItembg.value = \"\";\n      } else {\n        segmentedItembg.value = isDark.value\n          ? \"#1f1f1f\"\n          : \"rgba(0, 0, 0, 0.06)\";\n      }\n    }\n\n    function handleMouseleave(_, event: Event) {\n      event.preventDefault();\n      curMouseActive.value = -1;\n    }\n\n    function handleInit(index = curIndex.value) {\n      nextTick(() => {\n        const curLabelRef = instance?.proxy?.$refs[`labelRef${index}`] as ElRef;\n        width.value = curLabelRef.clientWidth;\n        translateX.value = curLabelRef.offsetLeft;\n        initStatus.value = true;\n      });\n    }\n\n    watch(\n      () => curIndex.value,\n      index => {\n        nextTick(() => {\n          handleInit(index);\n        });\n      },\n      {\n        deep: true,\n        immediate: true\n      }\n    );\n\n    const rendLabel = () => {\n      return props.options.map((option, index) => {\n        return (\n          <label\n            ref={`labelRef${index}`}\n            class={[\n              \"pure-segmented-item\",\n              option?.disabled && \"pure-segmented-item-disabled\"\n            ]}\n            style={{\n              background:\n                curMouseActive.value === index ? segmentedItembg.value : \"\",\n              color:\n                !option.disabled &&\n                (curIndex.value === index || curMouseActive.value === index)\n                  ? isDark.value\n                    ? \"rgba(255, 255, 255, 0.85)\"\n                    : \"rgba(0,0,0,.88)\"\n                  : \"\"\n            }}\n            onMouseenter={event => handleMouseenter({ option, index }, event)}\n            onMouseleave={event => handleMouseleave({ option, index }, event)}\n            onClick={event => handleChange({ option, index }, event)}\n          >\n            <input type=\"radio\" name=\"segmented\" />\n            <div class=\"pure-segmented-item-label\">\n              {option.icon && !isFunction(option.label) ? (\n                <span\n                  class=\"pure-segmented-item-icon\"\n                  style={{ marginRight: option.label ? \"6px\" : 0 }}\n                >\n                  {h(useRenderIcon(option.icon))}\n                </span>\n              ) : null}\n              {option.label ? (\n                isFunction(option.label) ? (\n                  h(option.label)\n                ) : (\n                  <span>{option.label}</span>\n                )\n              ) : null}\n            </div>\n          </label>\n        );\n      });\n    };\n\n    return () => (\n      <div class=\"pure-segmented\">\n        <div class=\"pure-segmented-group\">\n          <div\n            class=\"pure-segmented-item-selected\"\n            style={{\n              width: `${width.value}px`,\n              transform: `translateX(${translateX.value}px)`,\n              display: initStatus.value ? \"block\" : \"none\"\n            }}\n          ></div>\n          {rendLabel()}\n        </div>\n      </div>\n    );\n  }\n});\n","import reSegmented from \"./src/index\";\nimport { withInstall } from \"@pureadmin/utils\";\n\n/** 分段控制器组件 */\nexport const ReSegmented = withInstall(reSegmented);\n\nexport default ReSegmented;\nexport type { OptionsType } from \"./src/type\";\n","<script setup lang=\"tsx\">\nimport { h } from \"vue\";\nimport { message } from \"@/utils/message\";\nimport HomeFilled from \"@iconify-icons/ep/home-filled\";\nimport { useRenderIcon } from \"@/components/ReIcon/src/hooks\";\nimport Segmented, { type OptionsType } from \"@/components/ReSegmented\";\n\ndefineOptions({\n  name: \"Segmented\"\n});\n\n/** 基础用法 */\nconst optionsBasis: Array<OptionsType> = [\n  {\n    label: \"周一\",\n    value: 1\n  },\n  {\n    label: \"周二\",\n    value: 2\n  },\n  {\n    label: \"周三\",\n    value: 3\n  },\n  {\n    label: \"周四\",\n    value: 4\n  },\n  {\n    label: \"周五\",\n    value: 5\n  }\n];\n\n/** 禁用 */\nconst optionsDisabled: Array<OptionsType> = [\n  {\n    label: \"周一\",\n    value: 1\n  },\n  {\n    label: \"周二\",\n    value: 2\n  },\n  {\n    label: \"周三\",\n    value: 3,\n    disabled: true\n  },\n  {\n    label: \"周四\",\n    value: 4\n  },\n  {\n    label: \"周五\",\n    value: 5,\n    disabled: true\n  }\n];\n\n/** 设置图标 */\nconst optionsIcon: Array<OptionsType> = [\n  {\n    label: \"周一\",\n    value: 1,\n    icon: HomeFilled\n  },\n  {\n    label: \"周二\",\n    value: 2\n  },\n  {\n    label: \"周三\",\n    value: 3,\n    icon: \"terminalWindowLine\"\n  },\n  {\n    label: \"周四\",\n    value: 4,\n    icon: \"streamline-emojis:airplane\"\n  },\n  {\n    label: \"周五\",\n    value: 5,\n    icon: \"streamline-emojis:2\"\n  }\n];\n\n/** 只设置图标 */\nconst optionsOnlyIcon: Array<OptionsType> = [\n  {\n    value: 1,\n    icon: HomeFilled\n  },\n  {\n    value: 2,\n    icon: \"terminalWindowLine\"\n  },\n  {\n    value: 3,\n    icon: \"streamline-emojis:cow-face\"\n  },\n  {\n    value: 4,\n    icon: \"streamline-emojis:airplane\"\n  },\n  {\n    value: 5,\n    icon: \"streamline-emojis:2\"\n  }\n];\n\n/** 自定义渲染 */\nconst optionsLabel: Array<OptionsType> = [\n  {\n    label: () => (\n      <div>\n        {h(useRenderIcon(HomeFilled), {\n          class: \"m-auto w-[20px] h-[20px]\"\n        })}\n        <p>周一</p>\n      </div>\n    ),\n    value: 1\n  },\n  {\n    label: () => (\n      <div>\n        {h(useRenderIcon(\"terminalWindowLine\"), {\n          class: \"m-auto w-[20px] h-[20px]\"\n        })}\n        <p>周二</p>\n      </div>\n    ),\n    value: 2\n  },\n  {\n    label: () => (\n      <div>\n        {h(useRenderIcon(\"streamline-emojis:cow-face\"), {\n          class: \"m-auto w-[20px] h-[20px]\"\n        })}\n        <p>周三</p>\n      </div>\n    ),\n    value: 3\n  }\n];\n\nconst optionsChange: Array<OptionsType> = [\n  {\n    label: \"周一\",\n    value: 1\n  },\n  {\n    label: \"周二\",\n    value: 2\n  },\n  {\n    label: \"周三\",\n    value: 3\n  }\n];\n\n/** change事件 */\nfunction onChange({ index, option }) {\n  const { label, value } = option;\n  message(`当前选中项索引为：${index}，名字为${label}，值为${value}`, {\n    type: \"success\"\n  });\n}\n</script>\n\n<template>\n  <el-card shadow=\"never\">\n    <template #header>\n      <div class=\"card-header\">\n        <span class=\"font-medium\">分段控制器</span>\n      </div>\n    </template>\n    <p class=\"mb-2\">基础用法</p>\n    <Segmented :options=\"optionsBasis\" />\n    <el-divider />\n    <p class=\"mb-2\">默认选中和禁用</p>\n    <Segmented :options=\"optionsDisabled\" :defaultValue=\"2\" />\n    <el-divider />\n    <p class=\"mb-2\">设置图标</p>\n    <Segmented :options=\"optionsIcon\" />\n    <el-divider />\n    <p class=\"mb-2\">只设置图标</p>\n    <Segmented :options=\"optionsOnlyIcon\" />\n    <el-divider />\n    <p class=\"mb-2\">自定义渲染</p>\n    <Segmented :options=\"optionsLabel\" />\n    <el-divider />\n    <p class=\"mb-2\">change事件</p>\n    <Segmented :options=\"optionsChange\" @change=\"onChange\" />\n    <el-divider />\n  </el-card>\n</template>\n"],"names":["props","options","type","Array","default","defaultValue","Number","defineComponent","name","emits","setup","emit","width","ref","translateX","isDark","useDark","initStatus","curMouseActive","segmentedItembg","instance","getCurrentInstance","curIndex","handleChange","option","index","event","disabled","preventDefault","value","handleMouseenter","handleMouseleave","_","handleInit","nextTick","curLabelRef","proxy","$refs","clientWidth","offsetLeft","watch","deep","immediate","rendLabel","map","_createVNode","background","color","icon","isFunction","label","marginRight","h","useRenderIcon","transform","display","ReSegmented","withInstall","reSegmented","optionsBasis","optionsDisabled","optionsIcon","HomeFilled","optionsOnlyIcon","optionsLabel","_createVNode2","class","_createTextVNode","optionsChange","onChange","message"],"mappings":"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"}