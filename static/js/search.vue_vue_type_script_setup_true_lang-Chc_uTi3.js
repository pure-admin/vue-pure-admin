var G=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var L=(t,a,l)=>a in t?G(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,b=(t,a)=>{for(var l in a||(a={}))M.call(a,l)&&L(t,l,a[l]);if(x)for(var l of x(a))O.call(a,l)&&L(t,l,a[l]);return t},T=(t,a)=>H(t,J(a));var P=(t,a,l)=>new Promise((v,r)=>{var d=o=>{try{p(l.next(o))}catch(u){r(u)}},i=o=>{try{p(l.throw(o))}catch(u){r(u)}},p=o=>o.done?v(o.value):Promise.resolve(o.value).then(d,i);p((l=l.apply(t,a)).next())});import{_ as Q}from"./_plugin-vue_export-helper-BvWjx8-P.js";import{u as W,v as X,P as Y}from"./plus-form-CXZ_7c0u.js";import{d as N,l as y,dx as Z,n as ee,b as h,e as f,aK as ae,k as le,w as c,K as D,aL as oe,bp as se,u as s,dy as re,dr as F,dz as te,h as S,t as k,i as C,f as I,dA as ne,dB as ue,dC as de,dD as pe,dE as ie,a4 as ce,v as m}from"./index-Cdx-WL5u.js";import{o as he}from"./orderBy-B9csfdq2.js";var fe=N({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},defaultUnfold:{type:Boolean,default:!1},searchText:{default:""},resetText:{default:""},retractText:{default:""},expandText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},labelPosition:{default:void 0},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})},needValidate:{type:Boolean,default:!1}},emits:["update:modelValue","search","change","reset","collapse"],setup(t,{expose:a,emit:l}){var v;const r=t,d=l,{t:i}=W(),p=y(),o=y((v=r.defaultUnfold)!=null?v:!1),u=y({}),R=Z(),E=m(()=>r.needValidate?R.rules:void 0),$=m(()=>o.value?r.retractText||i("plus.search.retract"):r.expandText||i("plus.search.expand")),g=m(()=>{const e=r.columns.filter(n=>s(n.hideInSearch)!==!0).map(n=>T(b({},n),{hideInForm:!1})).map(n=>T(b({},n),{order:n!=null&&n.order?s(n.order):0}));return he(e,["order"],["desc"])}),z=m(()=>r.hasUnfold&&!o.value?g.value.slice(0,r.showNumber):g.value);ee(()=>r.modelValue,e=>{u.value=e},{immediate:!0});const A=(e,n)=>P(null,null,function*(){d("update:modelValue",e),d("change",e,n)}),K=()=>{d("search",u.value)},j=()=>P(null,null,function*(){var e;(yield(e=p.value)==null?void 0:e.handleSubmit())&&d("search",u.value)}),V=m(()=>r.needValidate?j:K),_=()=>{u.value=b({},r.defaultValues),d("update:modelValue",u.value),d("reset",u.value)},w=e=>{e.preventDefault(),o.value=!o.value,d("collapse",o.value)};return a({plusFormInstance:p,handleReset:_,handleSearch:V.value,handleUnfold:w}),(e,n)=>(h(),f(s(Y),ce({ref_key:"plusFormInstance",ref:p},e.$attrs,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=B=>u.value=B),inline:e.inline,rules:E.value,"label-position":e.labelPosition,"row-props":e.rowProps,"col-props":e.colProps,columns:z.value,class:"plus-search","has-footer":!1,onChange:A}),ae({"search-footer":c(()=>[e.hasFooter?(h(),f(s(re),{key:0,class:"plus-search__button__wrapper",label:e.labelPosition==="top"?"placeholder":""},{default:c(()=>[D(e.$slots,"footer",{isShowUnfold:o.value,handleReset:_,handleSearch:V.value,handleUnfold:w,searchLoading:e.searchLoading},()=>[e.hasReset?(h(),f(s(F),{key:0,icon:s(te),onClick:_},{default:c(()=>[S(k(e.resetText||s(i)("plus.search.resetText")),1)]),_:1},8,["icon"])):C("v-if",!0),I(s(F),{type:"primary",loading:e.searchLoading,icon:s(ne),onClick:V.value},{default:c(()=>[S(k(e.searchText||s(i)("plus.search.searchText")),1)]),_:1},8,["loading","icon","onClick"]),e.hasUnfold&&g.value.length>e.showNumber?(h(),f(s(ue),{key:1,class:"plus-search__unfold",type:"primary",underline:s(X)?!1:"never",href:"javaScript:;",onClick:w},{default:c(()=>[S(k($.value)+" ",1),I(s(de),null,{default:c(()=>[o.value?(h(),f(s(pe),{key:0})):(h(),f(s(ie),{key:1}))]),_:1})]),_:1},8,["underline"])):C("v-if",!0)])]),_:3},8,["label"])):C("v-if",!0)]),_:2},[le(e.$slots,(B,U)=>({name:U,fn:c(q=>[D(e.$slots,U,oe(se(q)))])}))]),1040,["modelValue","inline","rules","label-position","row-props","col-props","columns"]))}}),ve=Q(fe,[["__file","index.vue"]]);const me=ve,we=N({__name:"search",setup(t){const a=y({status:"0",time:new Date().toString()}),l=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],v=i=>{},r=i=>{},d=()=>{};return(i,p)=>(h(),f(s(me),{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=o=>a.value=o),columns:l,"show-number":2,"label-width":"80","label-position":"right",onChange:v,onSearch:r,onReset:d},null,8,["modelValue"]))}});export{we as _};
