var ue=Object.defineProperty;var L=Object.getOwnPropertySymbols;var ie=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var G=(e,u,t)=>u in e?ue(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t,I=(e,u)=>{for(var t in u||(u={}))ie.call(u,t)&&G(e,t,u[t]);if(L)for(var t of L(u))oe.call(u,t)&&G(e,t,u[t]);return e};var M=(e,u,t)=>new Promise((z,v)=>{var C=d=>{try{f(t.next(d))}catch(p){v(p)}},g=d=>{try{f(t.throw(d))}catch(p){v(p)}},f=d=>d.done?z(d.value):Promise.resolve(d.value).then(C,g);f((t=t.apply(e,u)).next())});import{S as se}from"./sortable.esm-C0jtZaAC.js";import{d as ce,k as b,ah as m,ei as de,ad as fe,aG as F,e as a,a4 as ve,ab as r,F as H,z as E,A as R,ef as c,l as i,u as U,eo as he,ee as be,v as N,aS as pe,x as me,Z as ge,aD as xe,W as ye,a1 as Ce,a as ke,i as we,f as Be}from"./index-BAFRNKWY.js";import{u as Ee}from"./epTheme-CUxrXhwX.js";import{E as Re,R as Se,C as De,D as _e,S as Ae}from"./collapse-D-WOoPtD.js";function S(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!xe(e)}const Fe={title:{type:String,default:c("tableBar.pureList")},tableRef:{type:Object},columns:{type:Array,default:()=>[]},isExpandAll:{type:Boolean,default:!0},tableKey:{type:[String,Number],default:"0"}},ze=ce({name:"PureTableBar",props:Fe,emits:["refresh","fullscreen"],setup(e,{emit:u,slots:t,attrs:z}){const v=b("default"),C=b(!1),g=b(!0),f=b(!1),d=b(!1),p=ge(),k=b(e.isExpandAll),$=m(e==null?void 0:e.columns).filter(l=>de(l==null?void 0:l.hide)?!l.hide:!(fe(l==null?void 0:l.hide)&&(l!=null&&l.hide())));let x=F(m(e==null?void 0:e.columns),"label");const D=b(F(m($),"label")),h=b(m(e==null?void 0:e.columns)),T=N(()=>l=>({background:l===v.value?Ee().epThemeColor:"",color:l===v.value?"#fff":"var(--el-text-color-primary)"})),w=N(()=>["text-black","dark:text-white","duration-100","hover:text-primary!","cursor-pointer","outline-hidden"]),W=N(()=>["flex","justify-between","pt-[3px]","px-[11px]","border-b-[1px]","border-b-solid","border-[#dcdfe6]","dark:border-[#303030]"]);function Z(){C.value=!0,u("refresh"),pe(500).then(()=>C.value=!1)}function q(){k.value=!k.value,K(e.tableRef.data,k.value)}function J(){f.value=!f.value,u("fullscreen",f.value)}function K(l,n){l.forEach(o=>{e.tableRef.toggleRowExpansion(o,n),o.children!==void 0&&o.children!==null&&K(o.children,n)})}function Q(l){D.value=l?x:[],d.value=!1,h.value.map(n=>l?n.hide=!1:n.hide=!0)}function X(l){D.value=l;const n=l.length;g.value=n===x.length,d.value=n>0&&n<x.length}function Y(l,n){h.value.filter(o=>r(o.label)===r(n))[0].hide=!l}function ee(){return M(this,null,function*(){g.value=!0,d.value=!1,h.value=m(e==null?void 0:e.columns),x=[],x=yield F(m(e==null?void 0:e.columns),"label"),D.value=F(m($),"label")})}const le={dropdown:()=>{let l,n,o;return a(i("el-dropdown-menu"),{class:"translation"},{default:()=>[a(i("el-dropdown-item"),{style:T.value("large"),onClick:()=>v.value="large"},S(l=r(c("tableBar.pureLarge")))?l:{default:()=>[l]}),a(i("el-dropdown-item"),{style:T.value("default"),onClick:()=>v.value="default"},S(n=r(c("tableBar.pureDefault")))?n:{default:()=>[n]}),a(i("el-dropdown-item"),{style:T.value("small"),onClick:()=>v.value="small"},S(o=r(c("tableBar.pureSmall")))?o:{default:()=>[o]})]})}},ae=l=>{l.preventDefault(),me(()=>{var o;const n=((o=p==null?void 0:p.proxy)==null?void 0:o.$refs[`GroupRef${U(e.tableKey)}`]).$el.firstElementChild;se.create(n,{animation:300,handle:".drag-btn",onEnd:({newIndex:s,oldIndex:y,item:B})=>{const j=B,V=j.parentNode,O=h.value[y],P=h.value[s];if(O!=null&&O.fixed||P!=null&&P.fixed){const A=V.children[y];s>y?V.insertBefore(j,A):V.insertBefore(j,A&&A.nextElementSibling);return}const re=h.value.splice(y,1)[0];h.value.splice(s,0,re)}})})},te=l=>!!h.value.filter(n=>r(n.label)===r(l))[0].fixed,_=l=>({content:l,offset:[0,18],duration:[300,0],followCursor:!0,hideOnClick:"toggle"}),ne={reference:()=>E(a(Ae,{class:["w-[16px]",w.value]},null),[[R("tippy"),_(r(c("tableBar.pureColumnSettings")))]])};return()=>{var o;let l,n;return a(H,null,[a("div",ve(z,{class:["w-full","px-2","pb-2","bg-bg_color",f.value?["h-full!","z-2002","fixed","inset-0"]:"mt-2"]}),[a("div",{class:"flex justify-between w-full h-[60px] p-4"},[t!=null&&t.title?t.title():a("p",{class:"font-bold truncate"},[r(e.title)]),a("div",{class:"flex items-center justify-around"},[t!=null&&t.buttons?a("div",{class:"flex mr-4"},[t.buttons()]):null,(o=e.tableRef)!=null&&o.size?a(H,null,[E(a(Re,{class:["w-[16px]",w.value],style:{transform:k.value?"none":"rotate(-90deg)"},onClick:()=>q()},null),[[R("tippy"),_(k.value?r(c("tableBar.pureCollapse")):r(c("tableBar.pureExpand")))]]),a(i("el-divider"),{direction:"vertical"},null)]):null,E(a(Se,{class:["w-[16px]",w.value,C.value?"animate-spin":""],onClick:()=>Z()},null),[[R("tippy"),_(r(c("tableBar.pureRefresh")))]]),a(i("el-divider"),{direction:"vertical"},null),E(a(i("el-dropdown"),{trigger:"click"},I({default:()=>[a(De,{class:["w-[16px]",w.value]},null)]},le)),[[R("tippy"),_(r(c("tableBar.pureDensity")))]]),a(i("el-divider"),{direction:"vertical"},null),a(i("el-popover"),{placement:"bottom-start","popper-style":{padding:0},width:"200",trigger:"click"},I({default:()=>[a("div",{class:[W.value]},[a(i("el-checkbox"),{class:"-mr-1!",label:r(c("tableBar.pureColumnDisplay")),modelValue:g.value,"onUpdate:modelValue":s=>g.value=s,indeterminate:d.value,onChange:s=>Q(s)},null),a(i("el-button"),{type:"primary",link:!0,onClick:()=>ee()},S(l=r(c("tableBar.pureReset")))?l:{default:()=>[l]})]),a("div",{class:"pt-[6px] pl-[11px]"},[a(i("el-scrollbar"),{"max-height":"36vh"},{default:()=>[a(i("el-checkbox-group"),{ref:`GroupRef${U(e.tableKey)}`,modelValue:D.value,onChange:s=>X(s)},{default:()=>[a(i("el-space"),{direction:"vertical",alignment:"flex-start",size:0},S(n=x.map((s,y)=>a("div",{class:"flex items-center"},[a(_e,{class:["drag-btn w-[16px] mr-2",te(s)?"cursor-no-drop!":"cursor-grab!"],onMouseenter:B=>ae(B)},null),a(i("el-checkbox"),{key:y,label:s,value:s,onChange:B=>Y(B,s)},{default:()=>[a("span",{title:r(s),class:"inline-block w-[120px] truncate hover:text-text_color_primary"},[r(s)])]})])))?n:{default:()=>[n]})]})]})])]},ne)),a(i("el-divider"),{direction:"vertical"},null),E(a(i("iconifyIconOffline"),{class:["w-[16px]",w.value],icon:f.value?he:be,onClick:()=>J()},null),[[R("tippy"),f.value?r(c("tableBar.pureExitFullScreen")):r(c("tableBar.pureFullScreen"))]])])]),t.default({size:v.value,dynamicColumns:h.value})])])}}}),$e=ye(ze),Te={viewBox:"0 0 1024 1024",width:"1em",height:"1em"};function je(e,u){return ke(),we("svg",Te,[...u[0]||(u[0]=[Be("path",{fill:"currentColor",d:"M771.8 794.9A384 384 0 0 1 128 512h64a320 320 0 0 0 555.7 216.4h-93a32 32 0 1 1 0-64h149a32 32 0 0 1 32 32v149a32 32 0 1 1-64 0zM276.3 295.6h93a32 32 0 0 1 0 64H220.2a32 32 0 0 1-32-32v-149a32 32 0 0 1 64 0V229a384 384 0 0 1 644 282.9h-64a320 320 0 0 0-555.8-216.4z"},null,-1)])])}const Ke=Ce({name:"ep-refresh",render:je});export{$e as P,Ke as R};
