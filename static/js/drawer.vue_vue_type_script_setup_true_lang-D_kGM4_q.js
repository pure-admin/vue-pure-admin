var C=(y,v,r)=>new Promise((u,a)=>{var m=l=>{try{i(r.next(l))}catch(d){a(d)}},o=l=>{try{i(r.throw(l))}catch(d){a(d)}},i=l=>l.done?u(l.value):Promise.resolve(l.value).then(m,o);i((r=r.apply(y,v)).next())});import{b as N,_ as O}from"./_plugin-vue_export-helper-BvWjx8-P.js";/* empty css                   */import{u as R,P as S}from"./plus-form-DTlk7zTX.js";import{d as L,a as f,p as M,n as $,b as A,e as x,aK as F,w as n,M as h,g as K,aL as V,bp as k,f as w,u as p,dr as B,j as P,t as E,a4 as I,l as W,du as q,dt as z,k as G,h as H}from"./index-Dse0HmLc.js";const J={class:"plus-drawer-form__footer"};var Q=L({name:"PlusDrawerForm",__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(y,{expose:v,emit:r}){const u=y,a=r,{t:m}=R(),o=f(null),i=M(()=>{var e;return(e=o.value)==null?void 0:e.formInstance}),l=f(),d=f({}),b=f(!1);$(()=>u.visible,e=>{b.value=e},{immediate:!0}),$(()=>u.modelValue,e=>{d.value=e},{immediate:!0});const D=(e,s)=>{a("update:modelValue",e),a("change",e,s)},_=()=>C(null,null,function*(){var e,s,t;try{(yield(e=i.value)==null?void 0:e.validate())&&a("confirm",d.value)}catch(c){if(u.hasErrorTip){z.closeAll();const g=N(c)&&Object.values(c),j=g?(t=(s=g[0])==null?void 0:s[0])==null?void 0:t.message:void 0;z.warning(j||m("plus.form.errorTip"))}a("confirmError",c)}}),U=()=>{T(),a("update:visible",b.value),a("cancel")},T=()=>{b.value=!1};return v({drawerInstance:l,formInstance:i}),(e,s)=>(x(),A(p(q),I({ref_key:"drawerInstance",ref:l,modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=t=>b.value=t),class:"plus-drawer-form",size:e.size||"540px",title:p(m)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.$attrs,{onClose:U}),F({default:n(()=>[w(p(S),I({ref_key:"formInstance",ref:o,modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),"has-footer":!1},e.form,{onChange:D}),F({_:2},[e.$slots["form-footer"]?{name:"footer",fn:n(()=>[h(e.$slots,"form-footer")]),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:n(t=>[h(e.$slots,"form-group-header",V(k(t)))]),key:"1"}:void 0,W(e.$slots,(t,c)=>({name:c,fn:n(g=>[h(e.$slots,c,V(k(g)))])}))]),1040,["modelValue"])]),_:2},[e.$slots["drawer-header"]?{name:"header",fn:n(()=>[h(e.$slots,"drawer-header")]),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:n(()=>[K("div",J,[h(e.$slots,"drawer-footer",V(k({handleConfirm:_,handleCancel:T})),()=>[w(p(B),{onClick:T},{default:n(()=>[P(E(e.cancelText||p(m)("plus.drawerForm.cancelText")),1)]),_:1}),w(p(B),{type:"primary",loading:e.confirmLoading,onClick:_},{default:n(()=>[P(E(e.confirmText||p(m)("plus.drawerForm.confirmText")),1)]),_:1},8,["loading"])])])]),key:"1"}:void 0]),1040,["modelValue","size","title"]))}}),X=O(Q,[["__file","index.vue"]]);const Y=X,re=L({__name:"drawer",setup(y){const v=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],r=f(!1),u=f({}),a=()=>{r.value=!0};return(m,o)=>{const i=H("el-button");return x(),G("div",null,[w(i,{onClick:a},{default:n(()=>[...o[2]||(o[2]=[P("打开抽屉表单",-1)])]),_:1}),w(p(Y),{visible:r.value,"onUpdate:visible":o[0]||(o[0]=l=>r.value=l),modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l),form:{columns:v}},null,8,["visible","modelValue","form"])])}}});export{re as _};
